require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period4 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period4 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 112) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-81") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-81") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
df$treat_period <- ifelse(df$time < 34, 0, 1)
df$treat_period2 <- ifelse(df$time < 68, 0, 1) # 68 is the largest set of observations
df$treat_period3 <- ifelse(df$time < 81, 0, 1) # 81 is also the media of non-0 first_treated observations
df$treat_period4 <- ifelse(df$time < 112, 0, 1)
df$treat_period5 <- ifelse(df$time < 167, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (PKs enter, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
rm(data, p)
# first treatment (when pks leave)
sort(table(df$first_treated_leave), decreasing = T)
# 229      38     188     231      84
median(df$first_treated_leave[df$first_treated_leave>0])
df$treat_period <- ifelse(df$time < 38, 0, 1)
df$treat_period2 <- ifelse(df$time < 84, 0, 1)
df$treat_period3 <- ifelse(df$time < 188, 0, 1)
df$treat_period4 <- ifelse(df$time < 229, 0, 1)
df$treat_period5 <- ifelse(df$time < 231, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (when pks leave, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
cry <- df$prio_gwno[which(df$radpko_pko_deployed_any == 1)]
df <- df %>%
filter(prio_gwno %in% cry)
df <- df %>%
filter(prio_gwno %in% cry)
rlang::last_error()
df = as.data.frame(df)
df <- df %>%
filter(prio_gwno %in% cry)
# first treatment (PKs enter, neighbor violence)
rm(data, p)
sort(table(df$first_treated), decreasing = T)
df$treat_period <- ifelse(df$time < 34, 0, 1)
df$treat_period2 <- ifelse(df$time < 68, 0, 1) # 68 is the largest set of observations
df$treat_period3 <- ifelse(df$time < 81, 0, 1) # 81 is also the media of non-0 first_treated observations
df$treat_period4 <- ifelse(df$time < 112, 0, 1)
df$treat_period5 <- ifelse(df$time < 167, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (PKs enter, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
rm(data, p)
# first treatment (when pks leave)
sort(table(df$first_treated_leave), decreasing = T)
# 229      38     188     231      84
median(df$first_treated_leave[df$first_treated_leave>0])
df$treat_period <- ifelse(df$time < 38, 0, 1)
df$treat_period2 <- ifelse(df$time < 84, 0, 1)
df$treat_period3 <- ifelse(df$time < 188, 0, 1)
df$treat_period4 <- ifelse(df$time < 229, 0, 1)
df$treat_period5 <- ifelse(df$time < 231, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (when pks leave, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
a = read_rds("./data/Kunkel-Atkinson-Warner-final.rds")
df = a
rm(a)
df$prio_geometry = NULL
gc()
library(ggplot2)
# first treatment (PKs enter, neighbor violence)
rm(data, p)
df$treat_period <- ifelse(df$time < 34, 0, 1)
df$treat_period2 <- ifelse(df$time < 68, 0, 1) # 68 is the largest set of observations
df$treat_period3 <- ifelse(df$time < 81, 0, 1) # 81 is also the media of non-0 first_treated observations
df$treat_period4 <- ifelse(df$time < 112, 0, 1)
df$treat_period5 <- ifelse(df$time < 167, 0, 1)
df$acled_fatalities_violence_against_civilians
table(df$neighbor_fatalities_violence_against_civilians)
df$acled_fatalities_violence_against_civilians
df$treat_period <- ifelse(df$time < 34, 0, 1)
df$treat_period2 <- ifelse(df$time < 68, 0, 1) # 68 is the largest set of observations
df$treat_period3 <- ifelse(df$time < 81, 0, 1) # 81 is also the media of non-0 first_treated observations
df$treat_period4 <- ifelse(df$time < 112, 0, 1)
df$treat_period5 <- ifelse(df$time < 167, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_violence_against_civilians)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (PKs enter, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_violence_against_civilians)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
cry <- df$prio_gwno[which(df$radpko_pko_deployed_any == 1)]
df <- df %>%
filter(prio_gwno %in% cry)
df <- df %>%
as.data.frame() %>%
filter(prio_gwno %in% cry)
df$treat_period <- ifelse(df$time < 34, 0, 1)
df$treat_period2 <- ifelse(df$time < 68, 0, 1) # 68 is the largest set of observations
df$treat_period3 <- ifelse(df$time < 81, 0, 1) # 81 is also the media of non-0 first_treated observations
df$treat_period4 <- ifelse(df$time < 112, 0, 1)
df$treat_period5 <- ifelse(df$time < 167, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_violence_against_civilians)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (PKs enter, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_violence_against_civilians)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
rm(data, p)
# first treatment (when pks leave)
sort(table(df$first_treated_leave), decreasing = T)
# 229      38     188     231      84
median(df$first_treated_leave[df$first_treated_leave>0])
df$treat_period <- ifelse(df$time < 38, 0, 1)
df$treat_period2 <- ifelse(df$time < 84, 0, 1)
df$treat_period3 <- ifelse(df$time < 188, 0, 1)
df$treat_period4 <- ifelse(df$time < 229, 0, 1)
df$treat_period5 <- ifelse(df$time < 231, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_violence_against_civilians)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (when pks leave, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_violence_against_civilians)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
df$treat_period <- ifelse(df$time < 34, 0, 1)
df$treat_period2 <- ifelse(df$time < 68, 0, 1) # 68 is the largest set of observations
df$treat_period3 <- ifelse(df$time < 81, 0, 1) # 81 is also the media of non-0 first_treated observations
df$treat_period4 <- ifelse(df$time < 112, 0, 1)
df$treat_period5 <- ifelse(df$time < 167, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (PKs enter, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_enter_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period2 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period2 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 68) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-68") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
rm(data, p)
# first treatment (when pks leave)
sort(table(df$first_treated_leave), decreasing = T)
# 229      38     188     231      84
median(df$first_treated_leave[df$first_treated_leave>0])
df$treat_period <- ifelse(df$time < 38, 0, 1)
df$treat_period2 <- ifelse(df$time < 84, 0, 1)
df$treat_period3 <- ifelse(df$time < 188, 0, 1)
df$treat_period4 <- ifelse(df$time < 229, 0, 1)
df$treat_period5 <- ifelse(df$time < 231, 0, 1)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(acled_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_same.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
# first treatment (when pks leave, neighbor violence)
rm(data, p)
data <- df %>% dplyr::group_by(gid) %>%
mutate(
density_scaled = scale(neighbor_fatalities_any)
)
data$ever_tl_text <- ifelse(data$first_treated_leave > 0, "Treated", "Not Treated")
## Graph:
require("ggjoy")
p <- ggplot(data = data, aes(time, density_scaled))
pdf("./results/pt_pks_leave_neighbor.pdf", 10, 8)
p + #geom_point(aes(color = factor(ever_tl_text)), alpha = .1, shape = 16) +
scale_color_manual(values = c("black", "gray44")) +
stat_smooth(data = subset(data, treat_period3 == 0), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
stat_smooth(data = subset(data, treat_period3 == 1), aes(color = factor(ever_tl_text), linetype = factor(ever_tl_text)), method = "lm", fill = "lightgray") +
geom_vline(xintercept = 188) +
#  theme_safeskies +
ggtitle("Examining Parallel Trends Assumption, Treatment in t-188") + xlab("") + ylab("Pr(Fatalities)") +
theme(plot.title = element_text(face="bold"), axis.text=element_text(size=11), axis.title = element_text(size = 11),
panel.background = element_rect(fill = "transparent", colour = NA), plot.background = element_rect(fill = "transparent", colour = NA),
legend.title = element_blank())
dev.off()
